# Тестовое задание

Необходимо разработать сервис социальных связей.
На входе имеется журнал коммуникаций между пользователями. Необходимо строить граф социальных связей по этому журналу.

Это должен быть HTTP REST сервис, в нотации json.

Необходимы следующие методы:
- добавление записи факта коммуникации
- получение графа социальных связей, при этом граф должен содержать не только структуру по узлам и ребрам, но и иметь раздел со сводной информацией по количествам коммуникаций между пользователями (минимальное, максимальное, среднее)

Результат должен быть оформлен как репозиторий в git, сопровожден краткой инструкцией по установке и настройке.

## Выполнение

Граф реализован в виде списка смежности. В узле которого находится ID участника общения, и список контактов, с которыми он общался.
Из-за того, что взаимодействие между участниками может происходить несколько раз, то в списке храниться информация в виде словаря
`{user: id, total: value}`, где user - ID пользователя и total - количество взаимодействий.

Добавление новых записей в журнал реализовано с помощью массива, для возможности добавления сразу нескольких записей.
```json
[
    {"initiator_user": "ID", "acceptor_user": "ID"},
    ...
]
```

## Установка и запуск

Сервис работает на python c базой данных sqlite. 

Все зависимости вы можете найти в файле requirements.txt

### 1) Установка зависимостей из requirements.txt.
Python должен быть уже установлен.
```shell
pip install -r requirements.txt
```
### 2) Запуск сервиса.

```shell
python manage.py runserver
```

## Примеры работы 

### Пример добавления записи факта коммуникации
Добавление производится по ендпоинту api/communication/add методом POST, пример добавления с использованием curl:
```shell
curl --location --request POST 'http://127.0.0.1:8000/api/communication/add/' \
--header 'Content-Type: application/json' \
--data-raw '[
    {
        "initiator_user": 1,
        "acceptor_user": 2
    },
    {
        "initiator_user": 2,
        "acceptor_user": 3
    },
    {
        "initiator_user": 1,
        "acceptor_user": 3
    }
]'
```

### Пример получения графа социальных связей
Получение графа социальных связей осуществляется по ендпоинту api/communication/graph. Пример запроса и ответа с использованием curl:
```shell
curl --location --request GET 'http://127.0.0.1:8000/api/communication/graph'
```

```json
{
    "graph": {
        "2": [{"user": 3, "total": 1}, {"user": 4, "total": 1}, {"user": 5, "total": 2}],
        "3": [{"user": 4, "total": 1}],
        "5": [{"user": 3, "total": 1}],
        "min_coms": 1,
        "max_coms": 4,
        "avg_coms": 2
    }
}
```
В ответе на запрос получения графа социальных связей хранится информация о минимальном, максимальном и среднем 
количестве актов связи на пользователя.